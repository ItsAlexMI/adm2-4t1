---
title: "Unidad 2: Organizaci√≥n del CPU"
description: "Estructura interna del procesador, ciclo de instrucci√≥n (Fetch/Execute), Datapath y Unidades de Control, y arquitecturas de tratamiento de operandos."
tags: ["CPU", "Ciclo de Instrucci√≥n", "Registros", "Datapath", "Unidad de Control", "Arquitecturas de Operandos"]
---

# Unidad 2: üß† Organizaci√≥n del CPU

## Sinopsis Breve

Esta unidad desarrolla la organizaci√≥n interna del procesador: el **ciclo de instrucci√≥n** (*fetch/execute*), los **elementos constructivos** del CPU (registros, buses, ALU, *flags*, unidad de control), la separaci√≥n l√≥gica entre **datapath** y **control**, y las **arquitecturas de tratamiento de operandos** (acumulador, pila, registros con 2 y 3 direcciones). El contenido es fundamental para dise√±ar y analizar microarquitecturas y relacionar instrucciones con elementos f√≠sicos del CPU.

---

## Objetivos de Aprendizaje

1.  Identificar y explicar las fases del **ciclo de instrucci√≥n** y las subetapas de *fetch* y *execute*.
2.  Enumerar y describir los **elementos *hardware*** necesarios para construir un CPU funcional.
3.  Relacionar cada actividad del ciclo de instrucci√≥n con los **registros** y **buses** que intervienen.
4.  Diferenciar **datapath** y **unidad de control** y su papel en la ejecuci√≥n de instrucciones.
5.  Comparar y evaluar **arquitecturas de operandos**: acumulador, pila y registros (2 y 3 direcciones).
6.  Dise√±ar el flujo b√°sico de una instrucci√≥n simple (*fetch* ‚Üí *decode* ‚Üí *execute* ‚Üí *writeback*) usando MAR, MDR, PC, IR, ALU y registros.

---

## Desarrollo Tem√°tico

### Ciclo de Instrucci√≥n y sus Fases

El ciclo de instrucci√≥n es el proceso fundamental que el CPU repite continuamente:

1.  **Fase Fetch (B√∫squeda):**
    * Cargar la direcci√≥n de la instrucci√≥n desde el **PC** al **MAR**.
    * Leer la instrucci√≥n desde memoria al **MDR** y transferirla al **IR** para decodificaci√≥n.
    * **Incrementar el PC** para apuntar a la siguiente instrucci√≥n.
2.  **Fase Execute (Ejecuci√≥n):**
    * Decodificar la instrucci√≥n contenida en el **IR**.
    * Cargar operandos (desde registros o memoria).
    * Ejecutar la operaci√≥n en la **ALU**.
    * Almacenar el resultado en registro o memoria (*writeback*).
    * Verificar solicitudes de **interrupci√≥n** al finalizar la instrucci√≥n.

### Elementos B√°sicos para Construir el CPU

| Elemento | Prop√≥sito |
| :--- | :--- |
| **PC** (*Program Counter*) | Contiene la direcci√≥n de la **pr√≥xima** instrucci√≥n a buscar. |
| **IR** (*Instruction Register*) | Contiene la **instrucci√≥n actual** en decodificaci√≥n y ejecuci√≥n. |
| **MAR** (*Memory Address Register*) | Almacena la **direcci√≥n** de memoria a leer o escribir. |
| **MDR** (*Memory Data Register*) | Almacena el **dato** (instrucci√≥n u operando) le√≠do o escrito desde/a memoria. |
| **Registros de Prop√≥sito General** | Almacenamiento r√°pido de datos y resultados intermedios (R0..Rn). |
| **ALU** (*Arithmetic Logic Unit*) | √ìrgano de c√°lculo para operaciones aritm√©ticas y l√≥gicas. |
| **PSW** (*Processor Status Word*) | **Registro de Estado** que contiene *FLAGS* (Z, N/S, C, V) actualizados por la ALU. |
| **Buses** | V√≠as f√≠sicas para transferencia de datos, direcciones y se√±ales de control. |

### Interacci√≥n Memoria-CPU y Transferencia

La **secuencia t√≠pica** de transferencia involucra al PC, MAR, MDR e IR, coordinados por la Unidad de Control. La ALU y los registros internos se utilizan para operaciones r√°pidas, evitando accesos a memoria (m√°s lentos) siempre que sea posible.

* **Estados y Efectos Colaterales:** La ejecuci√≥n de instrucciones afecta el **estado de la m√°quina**, principalmente a trav√©s de la actualizaci√≥n del **PSW/FLAGS**.
* **Interrupciones:** Una se√±al **INT** (por perif√©ricos) detiene temporalmente la ejecuci√≥n secuencial. El CPU debe guardar el **contexto** (estado) actual y ejecutar una rutina de servicio (**ISR**).

### Datapath y Control

Estos dos componentes forman la separaci√≥n l√≥gica clave de la microarquitectura:

* **Datapath:** El **camino de datos**. Compuesto por el conjunto de registros, buses, y la ALU que f√≠sicamente **transportan y transforman** los datos. 
* **Unidad de Control:** La **l√≥gica de control**. Genera las **se√±ales de control** secuenciales (microinstrucciones o l√≥gica cableada) para dirigir las operaciones del Datapath.

### Arquitecturas del Procesador seg√∫n Tratamiento de Operandos

Define c√≥mo las instrucciones especifican la ubicaci√≥n de los operandos.

| Arquitectura | Direcciones | Operaci√≥n T√≠pica | Ventajas/Desventajas |
| :--- | :--- | :--- | :--- |
| **Acumulador** | 1 direcci√≥n | `ADD X` (Acumulador $\leftarrow$ Acumulador + Memoria[X]) | Simplicidad de instrucci√≥n, pero mayor tr√°fico a memoria. |
| **Pila (*Stack*)** | 0 direcciones | `ADD` (TOS $\leftarrow$ NOS + TOS) | C√≥digos compactos, f√°cil manejo de expresiones anidadas; requiere **SP** (*Stack Pointer*). |
| **Registros (2 Dir.)** | 2 direcciones | `ADD R1, R2` (R1 $\leftarrow$ R1 + R2) | Uso eficiente de registros, pero escritura **destructiva** (R1 se sobrescribe). |
| **Registros (3 Dir.)** | 3 direcciones | `ADD R1, R2, R3` (R1 $\leftarrow$ R2 + R3) | Facilita la **compilaci√≥n** y el **paralelismo**; instrucciones m√°s largas. |

---

## Conceptos y Definiciones Clave

| Concepto | Definici√≥n |
| :--- | :--- |
| **PC** | **Contador de Programa** que apunta a la pr√≥xima instrucci√≥n. |
| **IR** | **Registro de Instrucci√≥n** que contiene la instrucci√≥n en decodificaci√≥n. |
| **MAR / MDR** | Registros de **Direcci√≥n** y **Datos** para la interfaz con la memoria. |
| **ALU** | Unidad aritm√©tico-l√≥gica que realiza operaciones. |
| **PSW** | **Registro de Estado** con *FLAGS* (Z, N, C, V) que reflejan el resultado de la √∫ltima operaci√≥n. |
| **Datapath** | Elementos f√≠sicos que mueven y transforman datos. |
| **Unidad de Control** | Genera se√±ales de control para cada ciclo microarquitectural. |
| **TOS / NOS** | *Top of Stack* y *Next on Stack* en arquitectura de pila. |
| **SP** | **Puntero de Pila** que controla la din√°mica de la pila. |

---

## Conclusi√≥n

La organizaci√≥n del CPU articula c√≥mo la arquitectura se materializa en *hardware* funcional. Comprender el ciclo de instrucci√≥n y los elementos constructivos permite dise√±ar, optimizar y analizar **microarquitecturas**, y elegir el **modelo de operandos** adecuado seg√∫n criterios de simplicidad, rendimiento y facilidad de compilaci√≥n. Esta unidad es la base para comprender *pipelining*, paralelismo y optimizaciones posteriores en el curso.